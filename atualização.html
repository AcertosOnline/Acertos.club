<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Acertos Club</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <style>
    h1 { display: none; }
    html, body { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; }
    iframe { width: 100%; height: 100%; border: none; }

    .menu-btn {
      position: fixed;
      top: 20px;
      right: 20px;
      width: 50px;
      height: 50px;
      background: #333;
      color: #fff;
      font-size: 30px;
      text-align: center;
      line-height: 50px;
      border-radius: 50%;
      cursor: grab;
      z-index: 1000;
      transition: transform 0.3s ease;
      user-select: none;
    }
    .floating-menu {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      color: white;
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 999;
      transform: scale(0);
      transition: transform 0.3s ease;
    }
    .floating-menu.active {
      display: flex;
      transform: scale(1);
    }
    .menu-content { text-align: center; }
    .menu-content button, .menu-content a {
      padding: 15px 30px;
      margin: 10px;
      font-size: 18px;
      cursor: pointer;
    }
    .hidden { display: none; }
  </style>
</head>
<body>
  <h1>Acertos.club</h1>
  <iframe src="https://app.acertos.club/pr/CRTgB0ZV" allow="clipboard-read; clipboard-write" title="app.acertos.club"></iframe>

  <div class="menu-btn" id="menuBtn">☰</div>
  <div class="floating-menu" id="floatingMenu">
    <div class="menu-content" id="menuContent">
      <p>Contato: contato@acertos.club</p>
      <button id="palpitesBtn">Palpites</button>
    </div>
    <div class="menu-content hidden" id="bancasList">
      <div id="bancas"></div>
      <a href="#" id="backBtn">Voltar</a>
    </div>
    <div class="menu-content hidden" id="palpitesList">
      <div id="palpites"></div>
      <a href="#" id="backToBancasBtn">Voltar</a>
    </div>
  </div>

  <script>
    const menuBtn = document.getElementById('menuBtn');
    const floatingMenu = document.getElementById('floatingMenu');
    const menuContent = document.getElementById('menuContent');
    const bancasList = document.getElementById('bancasList');
    const palpitesList = document.getElementById('palpitesList');
    const bancasDiv = document.getElementById('bancas');
    const palpitesDiv = document.getElementById('palpites');
    const palpitesBtn = document.getElementById('palpitesBtn');
    const backBtn = document.getElementById('backBtn');
    const backToBancasBtn = document.getElementById('backToBancasBtn');

    let isMenuOpen = false;
    let isDragging = false;
    let isMobile = /Mobi|Android/i.test(navigator.userAgent); // Detecta dispositivos móveis
    let touchStartX = 0, touchStartY = 0, timeoutId;

    // Detecta cliques no botão do menu
    menuBtn.addEventListener('click', () => {
      if (isMenuOpen) {
        floatingMenu.classList.remove('active');
        setTimeout(() => floatingMenu.style.display = 'none', 300);
      } else {
        floatingMenu.style.display = 'flex';
        setTimeout(() => floatingMenu.classList.add('active'), 0);
      }
      isMenuOpen = !isMenuOpen;
    });

    // Função de toque e movimento em dispositivos móveis
    if (isMobile) {
      menuBtn.addEventListener('touchstart', (e) => {
        timeoutId = setTimeout(() => {
          isDragging = true;
          const touch = e.touches[0];
          touchStartX = touch.clientX - menuBtn.getBoundingClientRect().left;
          touchStartY = touch.clientY - menuBtn.getBoundingClientRect().top;
          menuBtn.style.cursor = 'grabbing';
        }, 500); // Segurar por 500ms ativa o arrastar
      });

      menuBtn.addEventListener('touchmove', (e) => {
        if (isDragging) {
          const touch = e.touches[0];
          const left = touch.clientX - touchStartX;
          const top = touch.clientY - touchStartY;

          // Impede que o botão saia da tela
          const screenWidth = window.innerWidth;
          const screenHeight = window.innerHeight;
          const btnWidth = menuBtn.offsetWidth;
          const btnHeight = menuBtn.offsetHeight;

          menuBtn.style.left = `${Math.min(screenWidth - btnWidth, Math.max(0, left))}px`;
          menuBtn.style.top = `${Math.min(screenHeight - btnHeight, Math.max(0, top))}px`;
          menuBtn.style.position = 'fixed';
        }
      });

      menuBtn.addEventListener('touchend', () => {
        clearTimeout(timeoutId);
        isDragging = false;
        menuBtn.style.cursor = 'grab';
      });
    }

    // Lógica para exibir bancas e palpites
    palpitesBtn.addEventListener('click', async () => {
      menuContent.classList.add('hidden');
      bancasList.classList.remove('hidden');
      try {
        const response = await fetch('https://app.acertosonline.com/palpites.js');
        const scriptText = await response.text();

        const scriptElement = document.createElement('script');
        scriptElement.textContent = scriptText;
        document.body.appendChild(scriptElement);

        if (typeof palpites === 'undefined') {
          throw new Error('Os dados não foram carregados corretamente.');
        }

        bancasDiv.innerHTML = '';
        Object.keys(palpites).forEach((banca) => {
          const btn = document.createElement('button');
          btn.textContent = banca;
          btn.onclick = () => showPalpites(banca);
          bancasDiv.appendChild(btn);
        });
      } catch (error) {
        console.error('Erro ao carregar as bancas:', error);
        alert('Erro ao carregar as bancas. Verifique o arquivo palpites.js.');
      }
    });

    function showPalpites(banca) {
      bancasList.classList.add('hidden');
      palpitesList.classList.remove('hidden');
      const { palpites: palpitesArray, frases } = palpites[banca] || {};
      if (!palpitesArray || !frases) {
        palpitesDiv.innerHTML = '<p>Erro ao carregar os palpites ou frases.</p>';
        return;
      }
      palpitesDiv.innerHTML = `<h2>Palpites:</h2>${palpitesArray.join('<br>')}<h3>Frases:</h3>${frases.join('<br>')}`;
    }

    backBtn.addEventListener('click', () => {
      bancasList.classList.add('hidden');
      menuContent.classList.remove('hidden');
    });

    backToBancasBtn.addEventListener('click', () => {
      palpitesList.classList.add('hidden');
      bancasList.classList.remove('hidden');
    });
  </script>
</body>
</html>
